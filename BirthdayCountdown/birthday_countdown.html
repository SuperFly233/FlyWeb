<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>18th Birthday Countdown!</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            margin: 0;
            height: 100vh; /* ä½¿é¡µé¢é«˜åº¦å§‹ç»ˆå……æ»¡è§†çª— */
            display: flex;
            flex-direction: column;
            justify-content: center; /* è®©å†…å®¹åœ¨é¡µé¢å‚ç›´å±…ä¸­ */
            align-items: center;
            padding-bottom: 50px; /* ä¸ºæŒ‰é’®å’Œç‰ˆæƒä¿¡æ¯ç•™å‡ºç©ºé—´ */
            overflow: hidden;
        }
        #headline {
            margin-bottom: 20px; /* å¢åŠ æ ‡é¢˜å’Œå€’è®¡æ—¶ä¹‹é—´çš„é—´è· */
        }
        #countdown-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        #countdown {
            font-size: 6em;
            color: #333;
            font-weight: bold;
            transition: transform 0.2s;
        }
        #countdown:hover {
            transform: scale(1.1); /* é¼ æ ‡æ‚¬åœæ—¶æ”¾å¤§æ•ˆæœ */
        }
        #target-date, #customization, #log {
            font-size: 0.3em; /* è®¾ç½®ä¸ºä¸ç‰ˆæƒä¿¡æ¯ç›¸åŒçš„å­—ä½“å¤§å° */
            margin-top: 10px;
            color: #666;
            transition: opacity 0.3s, visibility 0.3s; /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
            visibility: visible;
            opacity: 1;
        }
        .firework {
            position: absolute;
            width: 3px;
            height: 3px;
            background: red;
            border-radius: 50%;
            opacity: 0;
            animation: explode 1s ease-out infinite;
        }
        @keyframes explode {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(10); }
        }
        #customization {
            font-size: 1em;
            color: #333;
            margin-top: 10px;
            margin-bottom: 20px; /* å¢åŠ ä¸åº•éƒ¨ç‰ˆæƒä¿¡æ¯çš„é—´è· */
        }
        #customization input, #customization button {
            margin: 5px;
            padding: 5px 10px;
            font-size: 1em;
        }
        #customization input[type="datetime-local"] {
            width: 220px;
        }
        #log {
            font-size: 0.8em;
            color: #000;
            background-color: #f4f4f4;
            padding: 10px;
            margin-top: 20px;
            width: 80%;
            height: 100px;
            overflow-y: scroll;
            border: 1px solid #ccc;
        }
        #copyright {
            font-size: 0.8em;
            color: #999;
            position: fixed;
            bottom: 0;
            width: 100%;
            text-align: center;
            background-color: #f4f4f4;
            padding: 10px 0;
            cursor: pointer; /* æ·»åŠ é¼ æ ‡æŒ‡é’ˆæ ·å¼ */
        }
        #button-container {
            position: fixed;
            bottom: 120px; /* ç¡®ä¿æŒ‰é’®ä½äºç‰ˆæƒä¿¡æ¯ä¸Šæ–¹ */
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }
        .control-button {
            padding: 5px 10px;
            font-size: 0.8em;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            margin: 5px;
            transition: transform 0.2s;
            opacity: 0.7; /* è°ƒæ•´æŒ‰é’®ä¸å¤ªæ˜æ˜¾ */
        }
        .control-button:active {
            transform: scale(0.9); /* æŒ‰é’®ç‚¹å‡»æ—¶ç¼©å°æ•ˆæœ */
        }
        #language-selector {
            margin-top: 10px;
            position: fixed;
            bottom: 80px; /* ç¡®ä¿æŒ‰é’®ä½äºç‰ˆæƒä¿¡æ¯ä¸Šæ–¹ */
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            align-items: center;
            flex-wrap: wrap;
        }
        .language-button, .time-button {
            padding: 5px 10px;
            font-size: 0.8em;
            cursor: pointer;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            margin: 5px;
            transition: transform 0.2s;
            opacity: 0.7; /* è°ƒæ•´æŒ‰é’®ä¸å¤ªæ˜æ˜¾ */
        }
        .language-button:active, .time-button:active {
            transform: scale(0.9); /* æŒ‰é’®ç‚¹å‡»æ—¶ç¼©å°æ•ˆæœ */
        }
        /* å“åº”å¼è°ƒæ•´å­—ä½“å¤§å° */
        @media (max-width: 768px) { /* é’ˆå¯¹æ‰‹æœºå’Œå¹³æ¿ */
            #countdown {
                font-size: 4em; /* è¾ƒå°å±å¹•ä¸Šå°†å­—ä½“è°ƒæ•´ä¸º4em */
            }
        }

        @media (max-width: 480px) { /* é’ˆå¯¹æ›´å°çš„æ‰‹æœº */
            #countdown {
                font-size: 3em; /* éå¸¸å°çš„å±å¹•ä¸Šå°†å­—ä½“è°ƒæ•´ä¸º3em */
            }
        }
    </style>
</head>
<body>
    <div id="countdown-container">
        <h1 id="headline">è·ç¦»æˆ‘çš„18å²ç”Ÿæ—¥è¿˜æœ‰!</h1>
        <div id="countdown">
            <div id="time-remaining"></div>
            <div id="target-date">2024.8.29 16:10:00</div>
        </div>
    </div>

    <div id="button-container">
        <button class="control-button" onclick="simulateEnd()">æ¨¡æ‹Ÿç»“æŸ</button>
        <button class="control-button" onclick="pauseMusic()">æš‚åœ</button>
    </div>

    <div id="language-selector">
        <button class="language-button" onclick="setLanguage('zh')">ä¸­æ–‡</button>
        <button class="language-button" onclick="setLanguage('en')">English</button>
        <button class="language-button" onclick="setLanguage('ja')">æ—¥æœ¬èª</button>
    </div>

    <div id="customization">
        <input type="text" id="custom-headline" placeholder="è‡ªå®šä¹‰å€’è®¡æ—¶æ ‡é¢˜">
        <input type="text" id="custom-end-message" placeholder="è‡ªå®šä¹‰å€’è®¡æ—¶ç»“æŸä¿¡æ¯">
        <input type="datetime-local" id="custom-time" step="1" placeholder="è®¾ç½®å€’è®¡æ—¶æ—¶é—´"> <!-- æ”¯æŒç§’æ•°è®¾ç½® -->
        <button onclick="updateCustomText()">æ›´æ–°</button>
    </div>

    <div id="log">æ—¥å¿—è¾“å‡ºåŒºåŸŸ</div> <!-- æ–°å¢çš„æ—¥å¿—è¾“å‡ºåŒºåŸŸ -->

    <audio id="birthday-music" src="https://music.163.com/song/media/outer/url?id=497918887.mp3"></audio>
    <audio id="button-sound" src="https://www.soundjay.com/button/sounds/button-16.mp3"></audio> <!-- æŒ‰é’®ç‚¹å‡»éŸ³æ•ˆ -->

    <script>
        let targetTime = '16:10:00'; // é»˜è®¤æ—¶é—´
        let currentLanguage = 'zh'; // é»˜è®¤è¯­è¨€
        let countdownEnded = false; // æ ‡è®°å€’è®¡æ—¶æ˜¯å¦ç»“æŸ

        const translations = {
            'zh': {
                'headline': 'è·ç¦»æˆ‘çš„18å²ç”Ÿæ—¥è¿˜æœ‰!',
                'logCountdownEnded': 'ç”Ÿæ—¥å¿«ä¹!ğŸ‚',
                'logMusicSuccess': 'ç”Ÿæ—¥éŸ³ä¹æ’­æ”¾æˆåŠŸ!',
                'logMusicFail': 'ç”Ÿæ—¥éŸ³ä¹æ’­æ”¾å¤±è´¥: ',
                'browserTitle': 'ç”Ÿæ—¥å¿«ä¹ğŸ‚!'
            },
            'en': {
                'headline': 'Time left until my 18th Birthday!',
                'logCountdownEnded': 'Happy Birthday!ğŸ‚',
                'logMusicSuccess': 'Birthday music played successfully!',
                'logMusicFail': 'Birthday music failed to play: ',
                'browserTitle': 'Happy BirthdayğŸ‚!'
            },
            'ja': {
                'headline': 'ç§ã®18æ­³ã®èª•ç”Ÿæ—¥ã¾ã§ã®æ®‹ã‚Šæ™‚é–“ï¼',
                'logCountdownEnded': 'ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ï¼ğŸ‚',
                'logMusicSuccess': 'èª•ç”Ÿæ—¥ã®éŸ³æ¥½ãŒæ­£å¸¸ã«å†ç”Ÿã•ã‚Œã¾ã—ãŸï¼',
                'logMusicFail': 'èª•ç”Ÿæ—¥ã®éŸ³æ¥½ã®å†ç”Ÿã«å¤±æ•—ã—ã¾ã—ãŸ: ',
                'browserTitle': 'ãŠèª•ç”Ÿæ—¥ãŠã‚ã§ã¨ã†ğŸ‚ï¼'
            }
        };

        function countdown() {
            const targetDate = new Date(`2024-08-29T${targetTime}`).getTime();
            const now = new Date().getTime();
            let timeLeft = targetDate - now;

            if (timeLeft > 0) {
                let days = Math.floor(timeLeft / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
                const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
                const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000).toString().padStart(2, '0');
                const milliseconds = Math.floor(timeLeft % 1000).toString().padStart(3, '0');

                if (days === '00') {
                    days = ''; // éšè—å¤©æ•°
                } else {
                    days += ':'; // æ·»åŠ å¤©æ•°åˆ†éš”ç¬¦
                }

                document.getElementById("time-remaining").innerHTML = `${days}${hours}:${minutes}:${seconds}.${milliseconds}`;
                document.title = `${days}${hours}:${minutes}:${seconds} - ${translations[currentLanguage]['browserTitle']}`; // æ›´æ–°æ ‡ç­¾æ ‡é¢˜

                logMessage(`å½“å‰æ—¶é—´ï¼š${days}${hours}:${minutes}:${seconds}.${milliseconds}`); // å°†å½“å‰å€’è®¡æ—¶è¾“å‡ºåˆ°æ—¥å¿—

                if (timeLeft <= 60000 && timeLeft > 10000) { // å€’è®¡æ—¶å‰60ç§’åˆ°10ç§’æ—¶é—ªåŠ¨
                    document.body.style.backgroundColor = timeLeft % 2000 < 1000 ? "#f0e68c" : "#ffa07a";
                }

                if (timeLeft <= 10000 && timeLeft > 0) { // å‰©ä½™10ç§’æˆ–æ›´å°‘
                    document.body.style.backgroundColor = timeLeft % 500 < 250 ? "#ffdddd" : "#ddddff"; // å‰§çƒˆé—ªçƒèƒŒæ™¯
                }

                setTimeout(countdown, 10);

            } else {
                showBirthdayMessage(); // è°ƒç”¨å‡½æ•°æ˜¾ç¤ºç”Ÿæ—¥ä¿¡æ¯
            }
        }

        function showBirthdayMessage() {
            document.getElementById("time-remaining").innerHTML = translations[currentLanguage]['logCountdownEnded'];
            countdownEnded = true; // æ ‡è®°å€’è®¡æ—¶ç»“æŸ
            document.title = translations[currentLanguage]['browserTitle']; // æ›´æ–°ç½‘é¡µæ ‡é¢˜ä¸º"ç”Ÿæ—¥å¿«ä¹ğŸ‚!"
            playBirthdayMusic();
            createFireworks(); // å¯åŠ¨çƒŸèŠ±ç‰¹æ•ˆ
            logMessage("å€’è®¡æ—¶ç»“æŸï¼Œç”Ÿæ—¥å¿«ä¹ï¼"); // è¾“å‡ºå€’è®¡æ—¶ç»“æŸæ—¥å¿—
        }

        function simulateEnd() {
            showBirthdayMessage(); // è°ƒç”¨å‡½æ•°æ˜¾ç¤ºç”Ÿæ—¥ä¿¡æ¯
            logMessage("æ¨¡æ‹Ÿç»“æŸï¼Œç”Ÿæ—¥å¿«ä¹ï¼"); // è¾“å‡ºæ¨¡æ‹Ÿç»“æŸæ—¥å¿—
        }

        function pauseMusic() {
            const music = document.getElementById("birthday-music");
            music.pause();
            logMessage("éŸ³ä¹æš‚åœã€‚"); // è¾“å‡ºéŸ³ä¹æš‚åœæ—¥å¿—
        }

        function playBirthdayMusic() {
            const music = document.getElementById("birthday-music");
            music.play().then(() => {
                logMessage(translations[currentLanguage]['logMusicSuccess']); // è¾“å‡ºéŸ³ä¹æ’­æ”¾æˆåŠŸæ—¥å¿—
            }).catch(error => {
                logMessage(translations[currentLanguage]['logMusicFail'] + error); // è¾“å‡ºéŸ³ä¹æ’­æ”¾å¤±è´¥æ—¥å¿—
            });
        }

        function setTargetTime(time) {
            targetTime = time;
            document.getElementById("target-date").innerText = `2024.8.29 ${time}`; // æ›´æ–°æ˜¾ç¤ºçš„ç›®æ ‡æ—¶é—´
            playButtonSound();
            countdown(); // é‡æ–°å¼€å§‹å€’è®¡æ—¶
            logMessage(`å€’è®¡æ—¶ç›®æ ‡æ—¶é—´å·²è®¾ç½®ä¸º${time}`); // è¾“å‡ºæ—¶é—´è®¾ç½®æ—¥å¿—
        }

        function playButtonSound() {
            const buttonSound = document.getElementById("button-sound");
            buttonSound.play().catch(error => {
                logMessage("æŒ‰é’®å£°éŸ³æ’­æ”¾å¤±è´¥:" + error); // è¾“å‡ºæŒ‰é’®å£°éŸ³æ’­æ”¾å¤±è´¥æ—¥å¿—
            });
        }

        function createFireworks() {
            for (let i = 0; i < 10; i++) {
                const firework = document.createElement("div");
                firework.classList.add("firework");
                firework.style.left = `${Math.random() * 100}%`;
                firework.style.top = `${Math.random() * 100}%`;
                document.body.appendChild(firework);

                setTimeout(() => {
                    firework.remove();
                }, 1000);
            }
            setTimeout(createFireworks, 1000); // 30ç§’å†…é‡å¤ç”ŸæˆçƒŸèŠ±
            setTimeout(() => clearTimeout(createFireworks), 30000); // åœæ­¢çƒŸèŠ±ç”Ÿæˆ
        }

        function setLanguage(language) {
            currentLanguage = language;
            document.getElementById("headline").innerText = translations[language]['headline'];
            logMessage(`è¯­è¨€å·²åˆ‡æ¢ä¸º${language}`); // è¾“å‡ºè¯­è¨€åˆ‡æ¢æ—¥å¿—

            if (countdownEnded) {
                showBirthdayMessage(); // è¯­è¨€åˆ‡æ¢æ—¶æ›´æ–°æ˜¾ç¤ºå†…å®¹
            }
        }

        function updateCustomText() {
            const customHeadline = document.getElementById("custom-headline").value;
            const customEndMessage = document.getElementById("custom-end-message").value;
            const customTime = document.getElementById("custom-time").value;

            if (customHeadline) {
                document.getElementById("headline").innerText = customHeadline;
                logMessage(`å€’è®¡æ—¶æ ‡é¢˜å·²æ›´æ–°ä¸ºï¼š${customHeadline}`); // è¾“å‡ºæ ‡é¢˜æ›´æ–°æ—¥å¿—
            }
            if (customEndMessage) {
                translations[currentLanguage]['logCountdownEnded'] = customEndMessage;
                if (countdownEnded) {
                    showBirthdayMessage(); // æ›´æ–°ç»“æŸä¿¡æ¯
                }
                logMessage(`å€’è®¡æ—¶ç»“æŸä¿¡æ¯å·²æ›´æ–°ä¸ºï¼š${customEndMessage}`); // è¾“å‡ºç»“æŸä¿¡æ¯æ›´æ–°æ—¥å¿—
            }
            if (customTime) {
                const [date, time] = customTime.split("T");
                setTargetTime(time);
                document.getElementById("target-date").innerText = `${date} ${time}`;
                logMessage(`å€’è®¡æ—¶ç›®æ ‡æ—¶é—´å·²æ›´æ–°ä¸ºï¼š${customTime}`); // è¾“å‡ºæ—¶é—´æ›´æ–°æ—¥å¿—
            }
        }

        function toggleVisibility() {
            const elements = [document.getElementById("target-date"), document.getElementById("customization"), document.getElementById("log")];
            elements.forEach(element => {
                const isVisible = element.style.visibility !== "hidden";
                element.style.visibility = isVisible ? "hidden" : "visible";
                element.style.opacity = isVisible ? "0" : "1";
            });
        }

        function logMessage(message) {
            const logElement = document.getElementById("log");
            const timestamp = new Date().toLocaleTimeString();
            logElement.innerHTML += `<p>[${timestamp}] ${message}</p>`;
            logElement.scrollTop = logElement.scrollHeight; // æ»šåŠ¨åˆ°æ—¥å¿—åº•éƒ¨
        }

        document.getElementById("copyright").addEventListener("click", toggleVisibility);

        countdown(); // åˆå§‹åŒ–å€’è®¡æ—¶
    </script>

    <div id="copyright">v1.6.2 Copyright Â© 2012-2024 Yi Xiaowei. All rights reserved.</div> <!-- æ·»åŠ ç‰ˆæœ¬å·å¹¶ç§»åŠ¨åˆ°é¡µé¢åº•éƒ¨ -->
</body>
</html>
